<!-- Show full-screen logo strip if allowed -->
@if (isDynamicShow && configuration.showLogo && configuration.logoPath) {
  <app-logo-screen [imagePath]="configuration.logoPath" />
}

<!-- Trigger to show header -->
<div
  class="show_trigger"
  (mouseenter)="onShowHeader()"
  (pointerenter)="onShowHeader()"
  (touchstart)="onShowHeader()"
></div>

<!-- Main header bar -->
<nav
  class="fixed-top header px-4"
  [class.visible]="!isDynamicShow || showHeader()"
  [class.hidden]="isDynamicShow && !showHeader()"
  [ngStyle]="backgroundStyle()"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
  (pointerenter)="onMouseEnter()"
  (pointerleave)="onMouseLeave()"
>
  <div class="container-fluid d-flex align-items-center justify-content-between" style="height: 110px">

    <!-- Logo -->
    @if (configuration.showLogo && configuration.logoPath) {
      <img [src]="configuration.logoPath" class="logo" alt="Logo" />
    }

    <!-- Title -->
    @if (configuration.showTitle && configuration.title) {
      <p class="title m-0" [ngStyle]="textColor()">{{ configuration.title }}</p>
    }

    <!-- Navigation and Hamburger (always rendered) -->
    <div class="nav-container d-flex align-items-center gap-3">

      <!-- Nav links (desktop only) -->
      <div class="links d-none d-md-flex gap-3">
        @for (link of configuration.links; track link) {
          <a
            class="btn btn-link"
            [ngStyle]="textColor()"
            [routerLink]="link.navigationString"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
          >
            @if (link.isIcon) {
              <i class="bi" [class]="link.textString"></i>
            } @else {
              <span class="text">{{ link.textString }}</span>
            }
          </a>
        }
      </div>

      <!-- Hamburger (mobile only, controlled via CSS) -->
      <button class="hamburger d-md-none" (click)="toggleMobileMenu()">
        <i class="bi bi-list fs-3"></i>
      </button>
    </div>

    <!-- Dropdowns (always visible) -->
    @if (hasDropdowns()) {
      @for (dropdownConfiguration of configuration.dropdownsConfigurations; track dropdownConfiguration) {
        <app-professional-header-dropdown [configuration]="dropdownConfiguration" />
      }
    }

  </div>
</nav>

<!-- Mobile menu: shown when hamburger is active -->
@if (showMobileMenu()) {
  <div class="mobile-menu d-md-none">
    @for (link of configuration.links; track link) {
      <a class="dropdown-item" [routerLink]="link.navigationString" (click)="closeMobileMenu()">
        @if (link.isIcon) {
          <i class="bi" [class]="link.textString"></i>
        } @else {
          {{ link.textString }}
        }
      </a>
    }
  </div>
}
